define(["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=void 0;var t=function(e){var t=document.createElement("div");return t.textContent=e,t.innerHTML};e.init=function(e){var n=e.strings,s=document.getElementById("lumination-outline-editor"),l=document.querySelector("input[name=outline_json]");if(s&&l){var a;try{a=JSON.parse(l.value)}catch(e){a=[]}var o=function(){s.innerHTML="",a.forEach(function(e,l){var a=document.createElement("div");a.className="lumination-module card mb-3",a.innerHTML='<div class="card-header d-flex justify-content-between align-items-center"><span class="font-weight-bold">'+n.module+" "+(l+1)+'</span><button type="button" class="btn btn-sm btn-outline-danger lum-remove-module" data-index="'+l+'">'+n.removemodule+'</button></div><div class="card-body"></div>';var o=a.querySelector(".card-body"),i=document.createElement("div");i.className="form-group mb-3",i.innerHTML='<label class="font-weight-bold">'+n.module+' title</label><input type="text" class="form-control lum-module-title" data-module="'+l+'" value="'+t(e.title||"")+'">',o.appendChild(i),(e.lessons||[]).forEach(function(e,s){var a=document.createElement("div");a.className="input-group mb-2 lum-lesson-row",a.innerHTML='<div class="input-group-prepend"><span class="input-group-text">'+n.lesson+" "+(s+1)+'</span></div><input type="text" class="form-control lum-lesson-title" data-module="'+l+'" data-lesson="'+s+'" value="'+t(e.title||"")+'"><div class="input-group-append"><button type="button" class="btn btn-outline-danger btn-sm lum-remove-lesson" data-module="'+l+'" data-lesson="'+s+'">&times;</button></div>',o.appendChild(a)});var d=document.createElement("button");d.type="button",d.className="btn btn-sm btn-outline-secondary mt-1 lum-add-lesson",d.textContent="+ "+n.addlesson,d.setAttribute("data-module",l),o.appendChild(d),s.appendChild(a)});var e=document.createElement("button");e.type="button",e.className="btn btn-outline-primary mb-3 lum-add-module",e.textContent="+ "+n.addmodule,s.appendChild(e)},i=function(){s.querySelectorAll(".lumination-module").forEach(function(e,t){if(a[t]){var n=e.querySelector(".lum-module-title");n&&(a[t].title=n.value),e.querySelectorAll(".lum-lesson-title").forEach(function(e,n){a[t].lessons&&a[t].lessons[n]&&(a[t].lessons[n].title=e.value)})}}),l.value=JSON.stringify(a)};s.addEventListener("click",function(e){var t=e.target.closest("button");if(t){if(i(),t.classList.contains("lum-add-module"))a.push({title:"",lessons:[{title:""}]}),o();else if(t.classList.contains("lum-remove-module")){if(a.length<=1)return;a.splice(parseInt(t.dataset.index),1),o()}else if(t.classList.contains("lum-add-lesson")){var n=parseInt(t.dataset.module);a[n].lessons.push({title:""}),o()}else if(t.classList.contains("lum-remove-lesson")){var s=parseInt(t.dataset.module),l=parseInt(t.dataset.lesson);if(a[s].lessons.length<=1)return;a[s].lessons.splice(l,1),o()}i()}}),s.addEventListener("input",function(){i()});var d=s.closest("form");d&&d.addEventListener("submit",function(){i();var e=document.createElement("div");e.id="lumination-loading-overlay",e.style.cssText="position:fixed;inset:0;background:rgba(0,0,0,.6);z-index:9999;display:flex;align-items:center;justify-content:center;",e.innerHTML='<div style="background:#fff;border-radius:8px;padding:2rem 3rem;text-align:center;max-width:420px;"><div class="spinner-border text-primary mb-3" role="status"><span class="sr-only">Loading...</span></div><h4>'+t(n.generatingcourse)+'</h4><p class="text-muted mb-0">'+t(n.generatingcourse_desc)+"</p></div>",document.body.appendChild(e)}),o(),i()}}});